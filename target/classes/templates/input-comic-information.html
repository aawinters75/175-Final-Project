<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="ISO-8859-1">
<title>Add a new comic to the master list</title>
</head>
<body>
<div class="container">
<script>

  function checkForm(form)
  {
    // validation fails if the input is blank
    if(form.publisher.value == "") {
      alert("Error: Publisher is empty!");
      form.publisher.focus();
      return false;
    }
    if(form.seriesTitle.value == "") {
        alert("Error: Series Title is empty!");
        form.seriesTitle.focus();
        return false;
      }
    if(form.issueNum.value == "") {
        alert("Error: Issue Number is empty!");
        form.issueNum.focus();
        return false;
      }
    if(form.author.value == "") {
        alert("Error: Author is empty!");
        form.author.focus();
        return false;
      }
    if(form.illustrator.value == "") {
        alert("Error: Illustrator is empty!");
        form.illustrator.focus();
        return false;
      }
    if(form.yearPub.value == "") {
        alert("Error: Year Published is empty!");
        form.yearPub.focus();
        return false;
    }
    
    // regular expression to match only alphanumeric characters and spaces
    var re = /^[\w ]+$/;

    // validation fails if the input doesn't match our regular expression
    if(!re.test(form.publisher.value)) {
      alert("Error: Publisher contains invalid characters!");
      form.publisher.focus();
	return false;
    }

    if(!re.test(form.author.value)) {
        alert("Error: Author contains invalid characters!");
        form.author.focus();
  	return false;
      }

    if(!re.test(form.illustrator.value)) {
        alert("Error: Illustrator contains invalid characters!");
        form.illustrator.focus();
  	return false;
      }
    // validation was successful
    return true;
  }
    
</script>
<form 

th:object="${newComic}" th:action="@{/update/{id}(id=${newComic.id})}" method='POST' onsubmit = "return checkForm(this);">
Publisher: <input name = "publisher" size="10" th:field="*{publisher}"><br />
Series: <input name = "seriesTitle"size="10" th:field="*{seriesTitle}"><br />
Issue Number: <input name="issuNum" size="20" th:field="*{issueNum}"><br />  
Author: <input name = "author" size="15" th:field="*{author}"><br /> 
Illustrator: <input name = "illustrator" size="15" th:field="*{illustrator}"><br />
Year Published: <input name="yearPub" placeholder="1974" size="10" th:field="*{yearPub}"><br />
<input type = "submit" value="Add Comic">
</form> <br />
<a href="/viewAllComics">View all Comics</a>
<a href="../selection">Return to Home</a>
</div>
</body>
</html>